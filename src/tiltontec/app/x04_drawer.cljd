(ns tiltontec.app.x04-drawer
  (:require
    [tiltontec.cell.base :refer [mx-type minfo cinfo unbound *depender*] :as cty]
    [tiltontec.cell.core :refer [cF cF+ cF_ cI c_F]]
    [tiltontec.model.core :refer [make mget md-kids cFkids fmuv] :as md]
    ["package:flutter/widgets.dart" :as w]
    ["package:flutter/material.dart" :as m]
    ["package:flutter/painting.dart" :as p]
    [tiltontec.mx-flutter.corex :as fx]))

(defn my-home-page [title]
  (fx/scaffold
    {:appBar (m/AppBar :title (m/Text title))
     :drawer (cF (fx/drawer {}{:name :my-drawer}
                   (m/ListView
                     :padding m.EdgeInsets/zero ;; <-- default padding not good, so we specify one. Same as in HTML!
                     :children [(m/DrawerHeader
                                  :decoration (m/BoxDecoration :color m.Colors/blue)
                                  :child (m/Text "Drawer Header"))
                                (m/ListTile
                                  :title (m/Text "Item 1a")
                                  ;; todo make these nearest nav searching up
                                  :onTap #(.pop (fx/mnav)))
                                (m/ListTile
                                  :title (m/Text "Item 2")
                                  :onTap #(.pop (fx/mnav)))])))}
    {}
    ;; todo convert c-less, to center, use center! for stateful? But will most be stateless and require "!"?
    (fx/center {}{:name :ctr-less}
      (fx/text {}{:name :mypage} "My Ported Page!!"))))

;; todo mxf-ify
#_ (fx/drawer {}{:name :my-drawer}
     (fx/list-view {:padding m.EdgeInsets/zero} ;; <-- important
       {}
       (fx/drawer-header {:decoration (m/BoxDecoration :color m.Colors/blue)}{}
         (m/Text "Drawer Header"))
       (fx/list-tile {:title (m/Text "Item 1a")
                      :onTap #(.pop (fx/mnav))})
       (fx/list-tile {:title (m/Text "Item 2a")
                      :onTap #(.pop (fx/mnav))})))

(defn make-app []
  (fx/material-app
    {:title                      "Drawer Demo"
     :debugShowCheckedModeBanner false}
    {}
    (my-home-page "Drawer Demo")))


